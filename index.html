<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>NgDuc Iu Em 💖</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-papmYfwUu3CEzby9eInD3rwT+y9Q5RCqZ8GyHgAF7EfpgV/f4gZkWyhzXUbSLbpNQGcdVKAjz6xMEB5B+6dj7g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap');
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: black;
      perspective: 1000px;
    }

    .firefly {
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      border-radius: 50%;
      opacity: 0.6;
      animation: blink 2s infinite ease-in-out alternate;
    }

    @keyframes blink {
      0% { opacity: 0.2; transform: scale(1); }
      100% { opacity: 1; transform: scale(1.5); }
    }

    .scene {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: visible;
      transform-style: preserve-3d;
      transition: transform 0.1s ease-out;
      will-change: transform;
      z-index: 10;
    }

    .text {
      position: absolute;
      top: 0;
      font-family: 'Dancing Script', cursive;
      font-size: 42px;
      white-space: nowrap;
      pointer-events: none;
      animation:
        gentleFall 14s cubic-bezier(0.42, 0, 0.58, 1) infinite,
        rgbShift 14s ease-in-out infinite;
      opacity: 0;
      color: #fff;
      text-shadow:
        0 0 8px #fff,
        0 0 20px #f0f,
        0 0 30px #f00,
        0 0 40px #0ff,
        0 0 50px #f0f,
        0 0 60px #f00,
        0 0 70px #0ff;
      user-select: none;
      font-weight: 400;
      transform-origin: center;
    }

    @keyframes gentleFall {
      0% { transform: translateY(-10vh) scale(0.9); opacity: 0; }
      10% { opacity: 1; }
      50% { transform: translateY(50vh) scale(1.2); opacity: 1; }
      90% { opacity: 1; }
      100% { transform: translateY(110vh) scale(0.9); opacity: 0; }
    }

    @keyframes rgbShift {
      0%, 100% {
        color: #ffffff;
        text-shadow: 0 0 8px #ffffff, 0 0 20px #ff83a8, 0 0 30px #d12c4b, 0 0 40px #7feaff;
      }
      25% {
        color: #ff83a8;
        text-shadow: 0 0 8px #ff83a8, 0 0 20px #ff5e7f, 0 0 30px #d12c4b, 0 0 40px #7feaff;
      }
      50% {
        color: #d12c4b;
        text-shadow: 0 0 8px #d12c4b, 0 0 20px #ff2a82, 0 0 30px #8b1031, 0 0 40px #7feaff;
      }
      75% {
        color: #7feaff;
        text-shadow: 0 0 8px #7feaff, 0 0 20px #4ec9ff, 0 0 30px #2185a1, 0 0 40px #7feaff;
      }
    }

    .heart {
      font-size: 48px;
    }

    .petal {
      position: absolute;
      width: 12px;
      height: 18px;
      background: radial-gradient(ellipse at center, #ff5e7f 60%, #d12c4b 100%);
      border-radius: 60% 40% 60% 40% / 70% 90% 10% 30%;
      opacity: 0.85;
      pointer-events: none;
      animation: petalFall linear infinite;
      filter: drop-shadow(0 0 2px #d12c4b);
      transform-origin: center;
    }

    @keyframes petalFall {
      0% { transform: translateY(-10vh) rotate(0deg) translateX(0); opacity: 0; }
      10% { opacity: 1; }
      100% { transform: translateY(110vh) rotate(360deg) translateX(30px); opacity: 0; }
    }

    #audio-control {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 30;
      transition: background 0.3s ease;
    }

    #audio-control:hover {
      background: rgba(255, 255, 255, 0.3);
    }

    #audio-control i {
      color: white;
      font-size: 24px;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <div class="scene" id="scene"></div>

  <audio id="background-music" loop playsinline>
    <source src="https://files.catbox.moe/gb6x32.mp3" type="audio/mpeg" />
    Trình duyệt của bạn không hỗ trợ âm thanh.
  </audio>

  <div id="audio-control" aria-label="Toggle background music" role="button" tabindex="0">
    <i class="fas fa-volume-mute"></i>
  </div>

  <script>
    const texts = [
      "NgDuc Iu Em",
      "Ah Chỉ Iu Em Thôi Hẹ Hẹ",
      "I Love You",
      "❤️",
      "NTD HUB Iu Em"
    ];

    const scene = document.getElementById('scene');

    function createText() {
      const el = document.createElement("div");
      const content = texts[Math.floor(Math.random() * texts.length)];
      el.className = "text";
      if (content === "❤️") el.classList.add("heart");
      el.textContent = content;

      const left = Math.random() * 100;
      const duration = 14;
      const delay = Math.random() * 6;

      el.style.left = left + "vw";
      el.style.top = "0";
      el.style.animationDuration = `${duration}s, ${duration}s`;
      el.style.animationDelay = `${delay}s, ${delay}s`;
      scene.appendChild(el);

      setTimeout(() => {
        scene.removeChild(el);
      }, (duration + delay) * 1000);
    }

    setInterval(createText, 300);
    for (let i = 0; i < 40; i++) createText();

    for (let i = 0; i < 80; i++) {
      const firefly = document.createElement('div');
      firefly.className = 'firefly';
      firefly.style.left = Math.random() * 100 + 'vw';
      firefly.style.top = Math.random() * 100 + 'vh';
      firefly.style.animationDuration = (1 + Math.random() * 2) + 's';
      document.body.appendChild(firefly);
    }

    function createPetal() {
      const petal = document.createElement('div');
      petal.className = 'petal';

      const left = Math.random() * 100;
      const duration = 10 + Math.random() * 5;
      const delay = Math.random() * 5;

      petal.style.left = left + "vw";
      petal.style.top = "-5vh";
      petal.style.animationDuration = `${duration}s`;
      petal.style.animationDelay = `${delay}s`;
      petal.style.transform = `rotate(${Math.random() * 360}deg)`;

      scene.appendChild(petal);

      setTimeout(() => {
        scene.removeChild(petal);
      }, (duration + delay) * 1000);
    }

    setInterval(createPetal, 500);
    for (let i = 0; i < 30; i++) createPetal();

    // Audio setup
    const audio = document.getElementById('background-music');
    const audioControl = document.getElementById('audio-control');
    const audioIcon = audioControl.querySelector('i');
    let isPlaying = true;

    // Tự động phát khi có thể
    audio.play().then(() => {
      audioIcon.classList.remove('fa-volume-mute');
      audioIcon.classList.add('fa-volume-up');
    }).catch(() => {
      isPlaying = false;
      // Nếu trình duyệt chặn, sẽ chờ người dùng click
    });

    function toggleAudio() {
      if (isPlaying) {
        audio.pause();
        audioIcon.classList.remove('fa-volume-up');
        audioIcon.classList.add('fa-volume-mute');
      } else {
        audio.play();
        audioIcon.classList.remove('fa-volume-mute');
        audioIcon.classList.add('fa-volume-up');
      }
      isPlaying = !isPlaying;
    }

    audioControl.addEventListener('click', toggleAudio);
    audioControl.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' || e.key === ' ') toggleAudio();
    });
  </script>
</body>
</html>
